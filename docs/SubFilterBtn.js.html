<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: SubFilterBtn.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: SubFilterBtn.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Filter from "./Filter";

/**
 * Creates the active filter buttons that appear when filter is chosen. &lt;br>
 * Styling is done by scss
 */
class SubFilterBtn {
  static activeFilters = {
    colors: [],
    brands: [],
  };

  /**
   * @param {string} id id given by main Filter. eg "c1" for black or "b2" for Nuphy.
   * @param {string} filter InnerHTML of specific label -> will be visible to user. eg "black" or "Nuphy".
   */
  constructor(id, filter) {
    /**
     * @property {string} id Filter id of subfilterBtn
     * @property {string} filter Visible name of subfilterBtn
     * @property {htmlRef} ref Will always point to exact DOM location of this Btn
     */
    this.id = id;
    this.filter = filter;
    this.ref = this.init();
    if (id.toLowerCase().startsWith("c")) {
      SubFilterBtn.activeFilters.colors.push(this);
    } else if (id.toLowerCase().startsWith("b")) {
      SubFilterBtn.activeFilters.brands.push(this);
    }
    this.ref.addEventListener("click", this.singleBtnDelete);
  }

  /**
   * @property {function} init creates and inserts div before end with proper values. Also checks whether "Clear all" btn should be visible.
   * @returns {htmlRef} Looks for lastChild within parent div of Btns
   */
  init = () => {
    // Check if "clear all" btn should be visible
    if (
      SubFilterBtn.activeFilters.colors.length === 0 &amp;&amp;
      SubFilterBtn.activeFilters.brands.length === 0
    ) {
      document.querySelector(".subfilter-btn-clear").classList.remove("hidden");
    }
    // Create button
    document.querySelector(".subfilter-active").insertAdjacentHTML(
      "beforeend",
      `&lt;div class="active-filter-btn visibleBtns">
        &lt;span>${this.filter}&lt;/span>
        &lt;span>x&lt;/span>
      &lt;/div>`
    );
    return document.querySelector(".subfilter-active").lastChild;
  };

  /**
   * @property {function} singleBtnDelete takes care of the checkboxes and main filter of website
   * @returns {void}
   */
  singleBtnDelete = () => {
    // MAIN FILTER-----
    // Uncheck checkbox within filter
    document.querySelector(`#${this.id}`).checked = false;
    // Rerun filter function in main Filter
    Filter.filterWalkieTalkie[0].subFilter();
    // SUB FILTER-----
    // Delete btn
    this.delete();
  };

  /**
   * @property {function} delete deletes DOM element, filters out activeFilter from static activeFilters and if last btn is deleted, also hides "clear All"
   * @returns {void}
   */
  delete = () => {
    // Remove Btn from DOM
    this.ref.parentNode.removeChild(this.ref);
    // delete filter from activeFilter Object

    // IF ELSE BRAND COLOR
    SubFilterBtn.activeFilters.colors =
      SubFilterBtn.activeFilters.colors.filter((x) => x.id !== this.id);
    SubFilterBtn.activeFilters.brands =
      SubFilterBtn.activeFilters.brands.filter((x) => x.id !== this.id);
    // check if "clear All" should be deleted as well
    if (
      SubFilterBtn.activeFilters.colors.length === 0 &amp;&amp;
      SubFilterBtn.activeFilters.brands.length === 0
    ) {
      document.querySelector(".subfilter-btn-clear").classList.add("hidden");
    }
  };
}
export default SubFilterBtn;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Filter.html">Filter</a></li><li><a href="SubFilterBtn.html">SubFilterBtn</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Tue Jan 03 2023 13:54:51 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
